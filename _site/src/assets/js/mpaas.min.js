!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){!function(e,t){for(var n in t)e[n]=t[n]}(t,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"Base",(function(){return u})),n.d(t,"util",(function(){return c}));const r=window.navigator.userAgent;let i="-";const o=[{s:"Windows",r:/Windows/},{s:"Android",r:/Android/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone)/},{s:"iPad",r:/(iPad)/},{s:"iPod",r:/(iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"UNIX",r:/UNIX/}];for(let e=0;e<o.length;e+=1){const t=o[e];if(t.r.test(r)){i=t.s;break}}let s="-";switch(i){case"Windows":[,s]=/Windows (.*)/.exec(r);break;case"Mac OS X":[,s]=/Mac OS X (10[._\d]+)/.exec(r);break;case"Android":[,s]=/Android ([._\d]+)/.exec(r);break;case"iOS":case"iPad":case"iPod":s=/OS (\d+)_(\d+)_?(\d+)?/.exec(r),s=`${s[1]}.${s[2]}.${s[3]}`}let a=i;switch(i){case"Android":a=function(){let e="-";const t=r.split(";");if(t.length>0){const n=t.filter(e=>e.indexOf("Build")>-1);n.length>0&&([,e]=/\s+(.*)\s+Build/.exec(n[0]))}return e}();break;case"iOS":a=function(){let e;const t=document.createElement("canvas");if(t){const n=t.getContext("webgl")||t.getContext("experimental-webgl");if(n){const t=n.getExtension("WEBGL_debug_renderer_info");t&&(e=n.getParameter(t.UNMASKED_RENDERER_WEBGL))}}if(window.screen.height/window.screen.width==812/375&&3===window.devicePixelRatio)return"iPhone X";if(window.screen.height/window.screen.width==736/414&&3===window.devicePixelRatio)switch(e){default:return"iPhone";case"Apple A8 GPU":return"iPhone 6 Plus";case"Apple A9 GPU":return"iPhone 6s Plus";case"Apple A10 GPU":return"iPhone 7 Plus";case"Apple A11 GPU":return"iPhone 8 Plus"}else if(window.screen.height/window.screen.width==667/375&&3===window.devicePixelRatio)switch(e){default:return"iPhone";case"Apple A8 GPU":return"iPhone 6 Plus";case"Apple A9 GPU":return"iPhone 6s Plus";case"Apple A10 GPU":return"iPhone 7 Plus";case"Apple A11 GPU":return"iPhone 8 Plus"}else if(window.screen.height/window.screen.width==667/375&&2===window.devicePixelRatio)switch(e){default:return"iPhone";case"Apple A8 GPU":return"iPhone 6";case"Apple A9 GPU":return"iPhone 6s";case"Apple A10 GPU":return"iPhone 7";case"Apple A11 GPU":return"iPhone 8"}else if(window.screen.height/window.screen.width==1.775&&2===window.devicePixelRatio)switch(e){default:return"iPhone";case"PowerVR SGX 543":return"iPhone 5 or 5c";case"Apple A7 GPU":return"iPhone 5s";case"Apple A8 GPU":return"iPhone 6";case"Apple A9 GPU":return"iPhone SE or 6s";case"Apple A10 GPU":return"iPhone 7";case"Apple A11 GPU":return"iPhone 8"}else if(window.screen.height/window.screen.width==1.5&&2===window.devicePixelRatio)switch(e){default:return"iPhone 4 or 4s";case"PowerVR SGX 535":return"iPhone 4";case"PowerVR SGX 543":return"iPhone 4s"}else{if(window.screen.height/window.screen.width!=1.5||1!==window.devicePixelRatio)return"iPhone";switch(e){default:return"iPhone 1, 3G or 3GS";case"ALP0298C05":return"iPhone 3GS";case"S5L8900":return"iPhone 1, 3G"}}}()}var c={isMpaaS:function(){return window.navigator.userAgent.indexOf("NebulaSDK")>-1},jsBridgeReady:function(e){window.AlipayJSBridge?e&&e():document.addEventListener("AlipayJSBridgeReady",e,!1)},encodeStr:function(e){return"string"==typeof e?e.replace(/=|,|\^|\$\$/g,e=>{switch(e){case",":return"%2C";case"^":return"%5E";case"$$":return"%24%24";case"=":return"%3D";case"&&":return"%26%26";default:return" "}}):e},dateFormat:function(e){const t=e.getFullYear();let n=e.getMonth()+1;n=1===n.toString().length?"0"+n:n;let r=e.getDate();r=1===r.toString().length?"0"+r:r;let i=e.getHours();i=1===i.toString().length?"0"+i:i;let o=e.getMinutes();o=1===o.toString().length?"0"+o:o;let s=e.getSeconds();return s=1===s.toString().length?"0"+s:s,`${t}-${n}-${r} ${i}:${o}:${s}.${e.getMilliseconds()}`},detect:{os:i,osVersion:s,brand:a}};const d=e=>e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");class u{constructor(e){this.logTag="[mTracker]",this.mtrDebug=!1,this.autoStart=!0,this._init(e),this._validate(),this._logPv(),this._startAutoClick()}setUserId(e){this.userId=e}click(e,t={}){const{bizType:n,ext:r}=t;this._remoteLog({seedId:e,bizType:n,ext:r,actionId:"click"})}expo(e,t){const{bizType:n,ext:r}=t;this._remoteLog({seedId:e,bizType:n,ext:r,actionId:"exposure"})}_logPv(){}_validate(){const e=this._isValid();e.result||console.error(this.logTag,e.message)}_init(){window._to&&Object.assign(this,window._to)}static _getExtJoinChar(){return"^"}_startAutoClick(){document.addEventListener("click",e=>{let{target:t}=e;for(;t&&"BODY"!==t.tagName;){let e,n;const r={};for(let i=0;i<t.attributes.length;i+=1){const o=t.attributes[i];"data-seed"===o.name?e=d(o.value):/^data-mtr-/.test(o.name)?r[o.name.replace("data-mtr-","")]=d(o.value):"data-biztype"===o.name&&(n=d(o.value))}if(e){this.click(e,{ext:r,bizType:n});break}t=t.parentElement}})}_isValid(){return this.server?this.appId?this.workspaceId?this.h5version?{result:!0}:{result:!1,message:"请配置H5页面版本"}:{result:!1,message:"请配置workspaceId"}:{result:!1,message:"请配置appId"}:{result:!1,message:"请配置mtracker服务接收地址"}}_formatExtParams(e){const t=["userAgent="+c.encodeStr(window.navigator.userAgent),"fullURL="+c.encodeStr(window.document.URL)];return this.bizScenario&&t.push("mBizScenario="+c.encodeStr(this.bizScenario)),Object.keys(e).forEach(n=>{t.push(`${n}=${c.encodeStr(e[n])}`)}),t.join(u._getExtJoinChar())}_guid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}_remoteLog(e){const t=this._formatData(e);this.send({url:this.server,data:t})}}}]))},function(e,t,n){"use strict";n.r(t);var r=n(0);class i extends r.Base{_logPv(){this._remoteLog({seedId:window.location.href,actionId:"auto_openPage"})}_formatData(e){const{seedId:t,ext:n={},actionId:i,bizType:o}=e;return["D-VM",r.util.dateFormat(new Date),`${this.appId||""}_H5-${this.workspaceId||""}`,this.h5version,"2","-",this._getSessionId(),this.userId||"-",i,"-",(document.referrer||"-")+"|","-","-","-","-",t,"-",o||"UserBehaviorH5","-","-","-","-",this._formatExtParams(n)||"-","-","-",this._getUUid(),"-","-","-","-","-","-","-",r.util.detect.brand,r.util.detect.osVersion,"-","-","-",window.navigator.language||window.navigator.userLanguage||"-","-","-","-","-","-","-",`${window.screen.width}x${window.screen.height}`,"-","-"]}_getSessionId(){const{sessionStorage:e}=window,t="mtr-mdap";return e?(e[t]||(e[t]=this._guid()),e[t]):""}_getUUid(){const{localStorage:e}=window,t="mtr-mdap";return e?(e[t]||(e[t]=`${this._guid()}-${Date.now()}`),e[t]):""}send(e){const{url:t,data:n}=e,r=window.encodeURIComponent,i=new window.XMLHttpRequest;t&&(this.mtrDebug&&window.console.log(this.logTag,{url:t,data:r(n)}),i.open("POST",t,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send("data="+r(n)))}}class o extends r.Base{_validate(){}_remoteLog(e){const{seedId:t,ext:n={},actionId:i,bizType:o}=e;r.util.jsBridgeReady(()=>{this.mtrDebug&&window.console.log(this.logTag,"remoteLog",{seedId:t,param4:this._formatExtParams(n),actionId:i,bizType:o}),AlipayJSBridge.call("remoteLog",{seedId:t,param4:this._formatExtParams(n),actionId:i,bizType:o})})}static _getExtJoinChar(){return","}}window.initTracker=function(){let e;e=r.util.isMpaaS()?new o:new i,window.Tracker=e},window.notInitTrackerOnStart||window.initTracker()}]);